{% extends "blog/base.html" %}

{% block title %}Mypost{% endblock %}

{% block content %}
{% load static %}
<link rel="stylesheet" href="{% static 'home1.css' %}">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma-rtl.min.css">
  {% for blog in blogs %}
  <div class="card">
    <div class="top">
      <div class="userDetails">
        <div class="profile_img">
            <img class="cover" src="/user/media/{{blog.author.profile.image}}" alt="">
        </div>
        <h3>{{blog.author.username}}</h3>
      </div>
      <div>
        <a href="{% url 'delete' blog.id %}" Onclick="return ConfirmDelete();" >Delete<i id="delpost" class="fa fa-ellipsis-v dot" aria-hidden="true"></i></a>
      </div>
    </div>
    <div class="imgBx">
      <img class="cover" src="/user/media/{{blog.post_image}}" alt="">
    </div>
    <div class="actionBtns">
      <div class="left">
       <div >
            <i onclick="like('{{blog.pk}}')" class="bi bi-heart-fill" id="heart_{{blog.pk}}"></i>
       </div>
       <div style=" margin-top: -1.05px;">
        <i class="bi bi-chat-fill chat"></i>
       </div>
        
      </div>
    </div>
    <h4 class="likes"><span id="likes_{{blog.pk}}">1200</span>likes</h4>
    <h4 class="title">{{blog.title}}</h4>
    <h5 class="message">{{blog.content}}</h5>
    <h4 class="comment">View all 20 comments</h4>
    <div class="addComment">
      <div class="userImg">
        <img class="cover" src="/user/media/{{blog.post_image}}" alt="">
      </div>
      <input type="text" class="text" placeholder="Add a comment...">
    </div>
    <h5 class="postTime">1 day ago</h5>
  </div>
  {% endfor %}



<!-- SIDEBAR -->
<!-- <script>
  function like(){
    var heart = document.getElementById('heart')
    var likes = document.getElementById('likes')
    console.log(heart.style.color)
    document.getElementById("likes").style.color = "blue";
    
  }
</script> -->
<script>
  function like(id){
    const like = document.getElementById("heart_"+id)
    let countlike = document.getElementById("likes_"+id)
    if(!like.style.color){
      like.style.color="red"   
      countlike.innerHTML = eval(countlike.innerHTML+'+1')
    }
    else {
      like.style.color=""
      countlike.innerHTML = eval(countlike.innerHTML+'-1')
      console.log(countlike.innerHTML)
    }
     
      
  }
</script>
<script>
  function ConfirmDelete()
  {
    var x = confirm("Are you sure you want to delete?");
    if (x)
        return true;
    else
      return false;
  }
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous"></script>

{% endblock %}